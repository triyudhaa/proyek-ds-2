<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analisa Perubahan Garis Pantai Kelurahan Kohod, Kabupaten Tangerang</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/comparisonStyle.css') }}">
</head>

<body>
    <div class="container">
        <div class="header">Analisa Perubahan Garis Pantai Kelurahan Kohod, Kabupaten Tangerang</div>
        <div class="sidebar-content">
            <div class="sidebar">
                <div class="sidebar-group" id="dashboard" data-url="{{ url_for('dashboard') }}">
                    <img src="{{ url_for('static', filename='assets/dashboard.png') }}">
                    Dashboard
                </div>

                <div class="sidebar-group" id="detail" data-url="{{ url_for('detail') }}">
                    <img src="{{ url_for('static', filename='assets/detail.png') }}">
                    Detail
                </div>

                <div class="sidebar-group" id="comparison" data-url="{{ url_for('comparison') }}">
                    <img src="{{ url_for('static', filename='assets/compare.png') }}">
                    Perbandingan Garis
                </div>

                <div class="sidebar-group" id="prediction" data-url="{{ url_for('predict', satelit='sentinel') }}">
                    <img src="{{ url_for('static', filename='assets/prediction.png') }}">
                    Prediksi Baru
                </div>
            </div>

            <div class="main-content">
                <div class="side-container">
                    <span id="title">Pilih Rentang Tahun</span>
                    <form class="input" method="POST">
                        <div class="start-year" data-selected="{{ start_year }}">
                            <span>Tahun Awal:</span>
                            <div class="select-menu">
                                <div class="select-btn">
                                    <span class="sBtn-text">Pilih Tahun</span>
                                    <i class="bx bx-chevron-down"></i>
                                </div>
                                <ul class="options">
                                    <li class="option">
                                        <span class="option-text" data-value="2013">2013</span></li>
                                    <li class="option">
                                        <span class="option-text" data-value="2014">2014</span></li>
                                    <li class="option">
                                        <span class="option-text" data-value="2015">2015</span>
                                    </li>
                                    <li class="option">
                                        <span class="option-text" data-value="2016">2016</span>
                                    </li>
                                    <li class="option">
                                        <span class="option-text" data-value="2017">2017</span>
                                    </li>
                                    <li class="option">
                                        <span class="option-text" data-value="2018">2018</span>
                                    </li>
                                    <li class="option">
                                        <span class="option-text" data-value="2019">2019</span>
                                    </li>
                                    <li class="option">
                                        <span class="option-text" data-value="2020">2020</span>
                                    </li>
                                    <li class="option">
                                        <span class="option-text" data-value="2021">2021</span>
                                    </li>
                                    <li class="option">
                                        <span class="option-text" data-value="2022">2022</span>
                                    </li>
                                    <li class="option">
                                        <span class="option-text" data-value="2023">2023</span>
                                    </li>
                                    <li class="option">
                                        <span class="option-text" data-value="2024">2024</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="end-year" data-selected="{{ end_year }}">
                            <span>Tahun Akhir:</span>
                            <div class="select-menu">
                                <div class="select-btn">
                                    <span class="sBtn-text">Pilih Tahun</span>
                                    <i class="bx bx-chevron-down"></i>
                                </div>
                                <ul class="options">
                                    <li class="option">
                                        <span class="option-text" data-value="2013">2013</span></li>
                                        <li class="option">
                                            <span class="option-text" data-value="2014">2014</span></li>
                                            <li class="option">
                                                <span class="option-text" data-value="2015">2015</span>
                                            </li>
                                            <li class="option">
                                                <span class="option-text" data-value="2016">2016</span>
                                            </li>
                                            <li class="option">
                                                <span class="option-text" data-value="2017">2017</span>
                                            </li>
                                            <li class="option">
                                                <span class="option-text" data-value="2018">2018</span>
                                            </li>
                                            <li class="option">
                                                <span class="option-text" data-value="2019">2019</span>
                                            </li>
                                            <li class="option">
                                                <span class="option-text" data-value="2020">2020</span>
                                            </li>
                                            <li class="option">
                                                <span class="option-text" data-value="2021">2021</span>
                                            </li>
                                            <li class="option">
                                                <span class="option-text" data-value="2022">2022</span>
                                            </li>
                                            <li class="option">
                                                <span class="option-text" data-value="2023">2023</span>
                                            </li>
                                            <li class="option">
                                                <span class="option-text" data-value="2024">2024</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <input type="hidden" name="start_yr" id="start-year-input" value="{{ start_year }}">
                        <input type="hidden" name="end_yr" id="end-year-input" value="{{ end_year }}">
                        
                        <button class="submit">
                            Submit
                        </button>
                        {% if error %}
                        <p style="color: red;">{{ error }}</p>
                        {% endif %}
                    </form>
                </div>

                <div class="result {% if show_segment != 'show' %}hidden{% endif %}">
                    <div class="button-mean-all {% if show_segment != 'show' %}hidden{% endif %}">
                        <span id="mean" class="active">Rata-Rata</span>
                        <span id="all">Keseluruhan</span>
                    </div>
    
                    <div class="images-container {% if show_segment != 'show' %}hidden{% endif %}">
                        <img src="{{url_for('static', filename='assets/compare/predictionAvg.png')}}" class= "garis-pantai-img" id="garisPantaiAvg" alt="Garis Pantai Average">
                        <img src="{{url_for('static', filename='assets/compare/predictionAll.png')}}" class="garis-pantai-img hidden" id="garisPantaiAll" alt="Garis Pantai All">
                    </div>
                </div>

            </div>
        </div>
    </div>

</body>

</html>

<script>
/*side bar */
document.querySelectorAll('.sidebar-group').forEach(item => {
    item.addEventListener('click', () => {
        const url = item.getAttribute('data-url');
        window.location.href = url;
    });
});

// === Dropdown Universal ===
document.querySelectorAll(".select-menu").forEach(menu => {

    const selectBtn = menu.querySelector(".select-btn");
    const sBtn_text = menu.querySelector(".sBtn-text");
    const options = menu.querySelectorAll(".option");

    selectBtn.addEventListener("click", () => {
        menu.classList.toggle("active");
    });

    options.forEach(option => {
        option.addEventListener("click", () => {
            const text = option.querySelector(".option-text");
            const value = text.dataset.value;

            sBtn_text.innerText = text.innerText;
            menu.classList.remove("active");

            const wrapper = menu.closest(".start-year, .end-year");
            if (wrapper.classList.contains("start-year")) {
                document.getElementById("start-year-input").value = value;
            } else {
                document.getElementById("end-year-input").value = value;
            }
        });
    });
});

window.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll(".start-year, .end-year").forEach(wrapper => {
        const selected = wrapper.dataset.selected;
        if (!selected) return;

        wrapper.querySelector(".sBtn-text").innerText = selected;

        if (wrapper.classList.contains("start-year")) {
            document.getElementById("start-year-input").value = selected;
        } else {
            document.getElementById("end-year-input").value = selected;
        }
    });
});

// Form Start Year Input
document.querySelectorAll(".start-year .option-text").forEach(option => {
    option.addEventListener("click", () => {
        const value = option.dataset.value;
        const text = option.innerText;

        document.querySelector(".start-year .sBtn-text").innerText = text;
        document.getElementById("start-year-input").value = value;
    });
});

// Form End Year Input
document.querySelectorAll(".end-year .option-text").forEach(option => {
    option.addEventListener("click", () => {
        const value = option.dataset.value;
        const text = option.innerText;

        document.querySelector(".end-year .sBtn-text").innerText = text;
        document.getElementById("end-year-input").value = value;
    });
});

// === Mean button ===
function setDefaultMean() {
    document.getElementById("mean").classList.add("active");
    document.getElementById("garisPantaiAvg").classList.remove("hidden");
    document.getElementById("garisPantaiAll").classList.add("hidden");
    document.getElementById("all").classList.remove("active");
}

setDefaultMean();
const meanBtn = document.getElementById("mean");
const allBtn = document.getElementById("all");
const curImage = document.querySelector(".curImage");
const garisPantaiAll = document.getElementById("garisPantaiAll");
const garisPantaiAvg = document.getElementById("garisPantaiAvg");

meanBtn.addEventListener("click", () => {
    meanBtn.classList.add("active");
    garisPantaiAll.classList.add("hidden");
    garisPantaiAvg.classList.remove("hidden");
    allBtn.classList.remove("active");
});

allBtn.addEventListener("click", () => {
    allBtn.classList.add("active");
    garisPantaiAll.classList.remove("hidden");
    garisPantaiAvg.classList.add("hidden");
    meanBtn.classList.remove("active");
});


// === Submit behavior ===
// document.querySelector(".submit").addEventListener("click", function (e) {
//     e.preventDefault();

//     const startYear = document.querySelector(".start-year .sBtn-text").innerText;
//     const endYear = document.querySelector(".end-year .sBtn-text").innerText;

//     // if (startYear === "Pilih Tahun" || endYear === "Pilih Tahun") {
//     //     alert("Invalid Input. Isi kedua input.");
//     //     return;
//     // }

//     // else if (startYear === endYear) {
//     //     alert("Invalid Input. Tahun awal harus berbeda dari tahun akhir.");
//     //     return;
//     // }

//     // else if (startYear > endYear) {
//     //     alert("Invalid Input. Tahun awal tidak boleh lebih besar dari tahun akhir.");
//     //     return;
//     // }

//     // === Tampilkan bagian yang tersembunyi ===
//     document.querySelector(".button-mean-all").classList.remove("hidden");
//     document.querySelector(".perubahan-daerah").classList.remove("hidden");
//     document.querySelector(".images-container").classList.remove("hidden");

//     // === Update teks ===
//     document.querySelector(".curImage").innerText = 
//         `Periode dipilih: ${startYear} - ${endYear}`;

//     document.querySelector("#periode").innerText = 
//         `${startYear} - ${endYear}`;

//     document.querySelector(".deskripsi-group span:nth-child(2)").innerText =
//         `${startYear - 1} - ${endYear - 1}`;
    
//     // === Set Default State (Mean) ===
//     setDefaultMean();
// });
</script>